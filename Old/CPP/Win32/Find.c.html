<html>
<head>
<title>D:\vin-pro\cpp\win32\find.c.html</title>
<meta name="Generator" content="Vim/7.0">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#804040">  1 </font>
<font color="#804040">  2 </font>
<font color="#804040">  3 </font><font color="#0000ff">/*</font>
<font color="#804040">  4 </font><font color="#0000ff"> * File searching program in C using WIN32 API.</font>
<font color="#804040">  5 </font><font color="#0000ff"> * This program mimics some(very few) of the options of </font>
<font color="#804040">  6 </font><font color="#0000ff"> * Linux find command.</font>
<font color="#804040">  7 </font><font color="#0000ff"> * -It lacks in Regular Expression Support. </font>
<font color="#804040">  8 </font><font color="#0000ff"> *                                   By</font>
<font color="#804040">  9 </font><font color="#0000ff"> *                          K.Vineel Kumar Reddy. B.Tech III/IV IT</font>
<font color="#804040"> 10 </font><font color="#0000ff"> *                          Gayatri Vidya Parishad College of Engg.</font>
<font color="#804040"> 11 </font><font color="#0000ff"> *                          Vishakapatnam,Andhra Pradesh.</font>
<font color="#804040"> 12 </font><font color="#0000ff"> *                                    INDIA. </font>
<font color="#804040"> 13 </font><font color="#0000ff"> </font><font color="#0000ff">*/</font>
<font color="#804040"> 14 </font>
<font color="#804040"> 15 </font><font color="#0000ff">//=====================================HEADERS=========================================</font>
<font color="#804040"> 16 </font><font color="#a020f0">#include</font><font color="#ff00ff">&lt;windows.h&gt;</font>
<font color="#804040"> 17 </font><font color="#a020f0">#include</font><font color="#ff00ff">&lt;tchar.h&gt;</font>
<font color="#804040"> 18 </font><font color="#0000ff">//=====================================MACROS==========================================</font>
<font color="#804040"> 19 </font><font color="#a020f0">#define WIN32_LEAN_AND_MEAN</font>
<font color="#804040"> 20 </font><font color="#a020f0">#define IsDir(data) (data.dwFileAttributes&amp;FILE_ATTRIBUTE_DIRECTORY) \</font>
<font color="#804040"> 21 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_DIRECTORY</font>
<font color="#804040"> 22 </font><font color="#a020f0">#define IsArchive(data) (data.dwFileAttributes&amp;FILE_ATTRIBUTE_ARCHIVE)\</font>
<font color="#804040"> 23 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_ARCHIVE</font>
<font color="#804040"> 24 </font><font color="#a020f0">#define IsCompressed(data) (data.dwFileAttributes&amp;FILE_ATTRIBUTE_COMPRESSED)\</font>
<font color="#804040"> 25 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_COMPRESSED</font>
<font color="#804040"> 26 </font><font color="#a020f0">#define IsEncrypted(data) (data.dwFileAttributes&amp;FILE_ATTRIBUTE_ENCRYPTED)\</font>
<font color="#804040"> 27 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_ENCRYPTED</font>
<font color="#804040"> 28 </font><font color="#a020f0">#define IsHidden(data) (data.dwFileAttributes&amp;FILE_ATTRIBUTE_HIDDEN)\</font>
<font color="#804040"> 29 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_HIDDEN</font>
<font color="#804040"> 30 </font><font color="#a020f0">#define IsReadOnly(data) (data.dwFileAttributes&amp;FILE_ATTRIBUTE_READONLY)\</font>
<font color="#804040"> 31 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_READONLY</font>
<font color="#804040"> 32 </font><font color="#a020f0">#define IsSystem(data)  (data.dwFileAttributes&amp;FILE_ATTRIBUTE_SYSTEM)\</font>
<font color="#804040"> 33 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_SYSTEM</font>
<font color="#804040"> 34 </font><font color="#a020f0">#define IsTemporary(data) (data.dwFileAttributes&amp;FILE_ATTRIBUTE_TEMPORARY)\</font>
<font color="#804040"> 35 </font><font color="#a020f0">                                            ==  FILE_ATTRIBUTE_TEMPORARY</font>
<font color="#804040"> 36 </font><font color="#a020f0">#define ValidDir(data) lstrcmpi(data.cFileName,</font><font color="#ff00ff">&quot;.&quot;</font><font color="#a020f0">)&amp;&amp;lstrcmpi(data.cFileName,</font><font color="#ff00ff">&quot;..&quot;</font><font color="#a020f0">)</font>
<font color="#804040"> 37 </font><font color="#a020f0">#define IsDateBefore()   St.wYear&lt;yy||  \</font>
<font color="#804040"> 38 </font><font color="#a020f0">                         St.wYear==yy&amp;&amp;St.wMonth&lt;mm||\</font>
<font color="#804040"> 39 </font><font color="#a020f0">                         St.wYear==yy&amp;&amp;St.wMonth==mm&amp;&amp;St.wDay&lt;dd</font>
<font color="#804040"> 40 </font><font color="#a020f0">#define IsDateAfter()    St.wYear&gt;yy||  \</font>
<font color="#804040"> 41 </font><font color="#a020f0">                         St.wYear==yy&amp;&amp;St.wMonth&gt;mm||\</font>
<font color="#804040"> 42 </font><font color="#a020f0">                         St.wYear==yy&amp;&amp;St.wMonth==mm&amp;&amp;St.wDay&gt;dd    </font>
<font color="#804040"> 43 </font><font color="#a020f0">#define IsDateEqual()    St.wYear==yy&amp;&amp;St.wMonth==mm&amp;&amp;St.wDay==dd       </font>
<font color="#804040"> 44 </font><font color="#0000ff">//=============================USER  DEFINED FUNCTIONS=================================</font>
<font color="#804040"> 45 </font><font color="#2e8b57"><b>void</b></font> Help();
<font color="#804040"> 46 </font><font color="#2e8b57"><b>void</b></font> SetLtGtEq(<font color="#2e8b57"><b>char</b></font> * argv);<font color="#0000ff">//set less than,greater than,equal to flags</font>
<font color="#804040"> 47 </font><font color="#2e8b57"><b>void</b></font> SearchByName(LPTSTR path);
<font color="#804040"> 48 </font><font color="#2e8b57"><b>void</b></font> SearchBySize(LPTSTR path);
<font color="#804040"> 49 </font><font color="#2e8b57"><b>void</b></font> SearchByText(LPTSTR path);
<font color="#804040"> 50 </font><font color="#2e8b57"><b>void</b></font> SearchByTime(LPTSTR path);
<font color="#804040"> 51 </font><font color="#2e8b57"><b>void</b></font> Split(LPCTSTR s,LPCTSTR pat);
<font color="#804040"> 52 </font><font color="#2e8b57"><b>int</b></font> IndexOf(LPCTSTR str,LPCTSTR pat,<font color="#2e8b57"><b>int</b></font> start);
<font color="#804040"> 53 </font>LPTSTR SubString(LPCTSTR s,<font color="#2e8b57"><b>int</b></font> st,<font color="#2e8b57"><b>int</b></font> len);
<font color="#804040"> 54 </font>BOOL EndsWith(LPCTSTR s1,LPCTSTR pat);
<font color="#804040"> 55 </font>BOOL Contains(LPCTSTR s,LPCTSTR pat);
<font color="#804040"> 56 </font>BOOL PathExist(LPTSTR path);
<font color="#804040"> 57 </font>BOOL ValidExtension(LPCTSTR name);
<font color="#804040"> 58 </font><font color="#0000ff">//=============================USER DEFINED VARIABLES==================================</font>
<font color="#804040"> 59 </font>TCHAR name[MAX_PATH],text[MAX_PATH],temp[MAX_PATH],ext[<font color="#ff00ff">10</font>],x[<font color="#ff00ff">3</font>][<font color="#ff00ff">6</font>],attr[<font color="#ff00ff">2</font>];
<font color="#804040"> 60 </font>BOOL _name,_path,_size,_text,_ext,_mt,_at,_ct,lt,gt,eq,_maxdepth,_attr;
<font color="#804040"> 61 </font>DWORD size=<font color="#ff00ff">1</font>,at,ct,mt,mm,dd,yy,maxdepth,depth_count;
<font color="#804040"> 62 </font>WIN32_FIND_DATA data;
<font color="#804040"> 63 </font>FILETIME Ct,Mt,At;
<font color="#804040"> 64 </font>SYSTEMTIME St;
<font color="#804040"> 65 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040"> 66 </font><font color="#2e8b57"><b>void</b></font> Help()
<font color="#804040"> 67 </font>{
<font color="#804040"> 68 </font>    _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Find 1.0 - File Searching Program.&quot;</font>);
<font color="#804040"> 69 </font>    _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Copyright (C) 2007-2008 K.Vineel Kumar Reddy. ;)&quot;</font>);
<font color="#804040"> 70 </font>    _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Compiled On </font><font color="#6a5acd">%s</font><font color="#ff00ff"> - vineelkumarreddy.googlepages.com</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>,<font color="#ff00ff">__DATE__</font>);
<font color="#804040"> 71 </font>    _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">LICENSED TO EVERYBODY ... :)</font><font color="#6a5acd">\n</font><font color="#ff00ff">&quot;</font>);
<font color="#804040"> 72 </font>
<font color="#804040"> 73 </font>    _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">find -path &lt;path&gt; &lt;options&gt; &quot;</font>);
<font color="#804040"> 74 </font>    _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">&lt;options&gt; -&gt; all options are mutually exclusive unless specified otherwise</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 75 </font><font color="#ff00ff">     -name &lt;file name&gt;</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 76 </font><font color="#ff00ff">     -size &lt;size&gt; example if size is</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 77 </font><font color="#ff00ff">               -10b  means lessthan 10 bytes</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 78 </font><font color="#ff00ff">               +10k  means greater than 10 kilo bytes</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 79 </font><font color="#ff00ff">               =10m  means equal to 10 Mega bytes</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 80 </font><font color="#ff00ff">     -text &lt;text&gt; [-ext &lt;ext&gt;] example if text is vineel </font><font color="#6a5acd">\n\</font>
<font color="#804040"> 81 </font><font color="#ff00ff">               the find command searches for files that contains </font><font color="#6a5acd">\n\</font>
<font color="#804040"> 82 </font><font color="#ff00ff">               text string vineel.If extension is specified files</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 83 </font><font color="#ff00ff">               with &lt;ext&gt; extension are searched else</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 84 </font><font color="#ff00ff">               files with default extensions are searched.</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 85 </font><font color="#ff00ff">               -ext is used only with -t option...!</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 86 </font><font color="#ff00ff">     -mtime &lt;time&gt; -mtime implies modified time</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 87 </font><font color="#ff00ff">               use -ctime for created  time</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 88 </font><font color="#ff00ff">               use -atime for access time</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 89 </font><font color="#ff00ff">               example if &lt;time&gt; is</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 90 </font><font color="#ff00ff">               -mm/dd/yyyy implies files created before mm/dd/yyyy</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 91 </font><font color="#ff00ff">               +mm/dd/yyyy implies files created after mm/dd/yyyy</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 92 </font><font color="#ff00ff">               =mm/dd/yyyy implies files created on mm/dd/yyyy</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 93 </font><font color="#ff00ff">     -maxdepth &lt;levels&gt; this specifies how many directory levels</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 94 </font><font color="#ff00ff">               the find should traverse.By default maxdepth = 0 .</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 95 </font><font color="#ff00ff">               This is used in combination of above options...!</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 96 </font><font color="#ff00ff">     -attr &lt;attr&gt; attr can take any one of the following</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 97 </font><font color="#ff00ff">               A indicates Archived file</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 98 </font><font color="#ff00ff">               C indicates Compressed file (NTFS drives only)</font><font color="#6a5acd">\n\</font>
<font color="#804040"> 99 </font><font color="#ff00ff">               E indicates Encrypted file  (NTFS drives only)</font><font color="#6a5acd">\n\</font>
<font color="#804040">100 </font><font color="#ff00ff">               H indicates Hidden file  </font><font color="#6a5acd">\n\</font>
<font color="#804040">101 </font><font color="#ff00ff">               R indicates Readonly file</font><font color="#6a5acd">\n\</font>
<font color="#804040">102 </font><font color="#ff00ff">               S indicates System file</font><font color="#6a5acd">\n\</font>
<font color="#804040">103 </font><font color="#ff00ff">               T indicates Temporary file</font><font color="#6a5acd">\n\</font>
<font color="#804040">104 </font><font color="#ff00ff">               This option applies only to files not directories</font><font color="#6a5acd">\n\</font>
<font color="#804040">105 </font><font color="#ff00ff">               This is used in combination of above options...!</font><font color="#6a5acd">\n\</font>
<font color="#804040">106 </font><font color="#ff00ff">            &quot;</font>);
<font color="#804040">107 </font>}
<font color="#804040">108 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">109 </font>BOOL PathExist(LPTSTR path)
<font color="#804040">110 </font>{
<font color="#804040">111 </font>    HANDLE h = CreateFile(
<font color="#804040">112 </font>            path,
<font color="#804040">113 </font>            GENERIC_READ,
<font color="#804040">114 </font>            FILE_SHARE_READ|FILE_SHARE_WRITE|FILE_SHARE_DELETE,
<font color="#804040">115 </font>            <font color="#ff00ff">NULL</font>,
<font color="#804040">116 </font>            OPEN_EXISTING,
<font color="#804040">117 </font>            FILE_FLAG_BACKUP_SEMANTICS,
<font color="#804040">118 </font>            <font color="#ff00ff">NULL</font>);
<font color="#804040">119 </font>    <font color="#804040"><b>return</b></font> h!=INVALID_HANDLE_VALUE;
<font color="#804040">120 </font>}
<font color="#804040">121 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">122 </font><font color="#2e8b57"><b>void</b></font> SearchBySize(LPTSTR path)
<font color="#804040">123 </font>{
<font color="#804040">124 </font>    HANDLE h;
<font color="#804040">125 </font>    TCHAR temp1[MAX_PATH];
<font color="#804040">126 </font>    sprintf(temp,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,path,<font color="#ff00ff">&quot;*.*&quot;</font>);<font color="#0000ff">//path = c:\windows name = *.*</font>
<font color="#804040">127 </font>    h = FindFirstFile(temp,&amp;data);  <font color="#0000ff">//temp = c:\windows\*.*</font>
<font color="#804040">128 </font>    <font color="#804040"><b>if</b></font>(h!=INVALID_HANDLE_VALUE){   <font color="#0000ff">//Check whether we got valid handle or not </font>
<font color="#804040">129 </font>        <font color="#804040"><b>do</b></font>{
<font color="#804040">130 </font>            <font color="#804040"><b>if</b></font>(IsDir(data)){
<font color="#804040">131 </font>                <font color="#804040"><b>if</b></font>(ValidDir(data)){
<font color="#804040">132 </font>                    sprintf(temp1,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#6a5acd">\\</font><font color="#ff00ff">&quot;</font>,path,data.cFileName);
<font color="#804040">133 </font>                    <font color="#804040"><b>if</b></font>(!_maxdepth)SearchBySize(temp1);
<font color="#804040">134 </font>                    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(depth_count++&lt;=maxdepth){
<font color="#804040">135 </font>                        SearchBySize(temp1);
<font color="#804040">136 </font>                        --depth_count;
<font color="#804040">137 </font>                    }
<font color="#804040">138 </font>                }
<font color="#804040">139 </font>            }
<font color="#804040">140 </font>            <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>((lt&amp;&amp;data.nFileSizeLow&lt;size)||
<font color="#804040">141 </font>                    (gt&amp;&amp;data.nFileSizeLow&gt;size)||
<font color="#804040">142 </font>                    (eq&amp;&amp;data.nFileSizeLow==size)){
<font color="#804040">143 </font>                    <font color="#804040"><b>if</b></font>((!_attr&amp;&amp;!(IsHidden(data))&amp;&amp;!(IsSystem(data)))||
<font color="#804040">144 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'A'</font>&amp;&amp;IsArchive(data))||
<font color="#804040">145 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'C'</font>&amp;&amp;IsCompressed(data))||
<font color="#804040">146 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'E'</font>&amp;&amp;IsEncrypted(data))||
<font color="#804040">147 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'H'</font>&amp;&amp;IsHidden(data))||
<font color="#804040">148 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'R'</font>&amp;&amp;IsReadOnly(data))||
<font color="#804040">149 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'S'</font>&amp;&amp;IsSystem(data))||
<font color="#804040">150 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'T'</font>&amp;&amp;IsTemporary(data)))
<font color="#804040">151 </font>                _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">--&gt;</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,path,data.cFileName,data.nFileSizeLow);
<font color="#804040">152 </font>            }
<font color="#804040">153 </font>        }<font color="#804040"><b>while</b></font>(FindNextFile(h,&amp;data));
<font color="#804040">154 </font>        FindClose(h);
<font color="#804040">155 </font>    }
<font color="#804040">156 </font>}
<font color="#804040">157 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">158 </font><font color="#2e8b57"><b>void</b></font> SearchByName(LPTSTR path)
<font color="#804040">159 </font>{
<font color="#804040">160 </font>    HANDLE h;
<font color="#804040">161 </font>    TCHAR temp1[MAX_PATH];
<font color="#804040">162 </font>    sprintf(temp,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,path,<font color="#ff00ff">&quot;*.*&quot;</font>);<font color="#0000ff">//path = c:\windows name = *.*</font>
<font color="#804040">163 </font>    h = FindFirstFile(temp,&amp;data);<font color="#0000ff">//temp = c:\windows\*.*</font>
<font color="#804040">164 </font>    <font color="#804040"><b>if</b></font>(h!=INVALID_HANDLE_VALUE){  <font color="#0000ff">//Check whether we got valid handle or not </font>
<font color="#804040">165 </font>        <font color="#804040"><b>do</b></font>{
<font color="#804040">166 </font>            <font color="#804040"><b>if</b></font>(IsDir(data)){
<font color="#804040">167 </font>                <font color="#804040"><b>if</b></font>(ValidDir(data)){
<font color="#804040">168 </font>                    sprintf(temp1,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#6a5acd">\\</font><font color="#ff00ff">&quot;</font>,path,data.cFileName);
<font color="#804040">169 </font>                    <font color="#804040"><b>if</b></font>(!_maxdepth)SearchByName(temp1);
<font color="#804040">170 </font>                    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(depth_count++&lt;=maxdepth){
<font color="#804040">171 </font>                        SearchByName(temp1);
<font color="#804040">172 </font>                        --depth_count;
<font color="#804040">173 </font>                    }
<font color="#804040">174 </font>                }
<font color="#804040">175 </font>            }
<font color="#804040">176 </font>            <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(!lstrcmpi(data.cFileName,name)){
<font color="#804040">177 </font>                    <font color="#804040"><b>if</b></font>((!_attr&amp;&amp;!(IsHidden(data))&amp;&amp;!(IsSystem(data)))||
<font color="#804040">178 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'A'</font>&amp;&amp;IsArchive(data))||
<font color="#804040">179 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'C'</font>&amp;&amp;IsCompressed(data))||
<font color="#804040">180 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'E'</font>&amp;&amp;IsEncrypted(data))||
<font color="#804040">181 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'H'</font>&amp;&amp;IsHidden(data))||
<font color="#804040">182 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'R'</font>&amp;&amp;IsReadOnly(data))||
<font color="#804040">183 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'S'</font>&amp;&amp;IsSystem(data))||
<font color="#804040">184 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'T'</font>&amp;&amp;IsTemporary(data)))
<font color="#804040">185 </font>                        _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,path,name);
<font color="#804040">186 </font>            }
<font color="#804040">187 </font>        }<font color="#804040"><b>while</b></font>(FindNextFile(h,&amp;data));
<font color="#804040">188 </font>        FindClose(h);
<font color="#804040">189 </font>    }
<font color="#804040">190 </font>}
<font color="#804040">191 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">192 </font><font color="#2e8b57"><b>void</b></font> SearchByText(LPTSTR path)
<font color="#804040">193 </font>{
<font color="#804040">194 </font>    HANDLE h;
<font color="#804040">195 </font>    TCHAR temp1[MAX_PATH];
<font color="#804040">196 </font>    sprintf(temp,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,path,<font color="#ff00ff">&quot;*.*&quot;</font>);<font color="#0000ff">//path = c:\windows name = *.*</font>
<font color="#804040">197 </font>    h = FindFirstFile(temp,&amp;data);<font color="#0000ff">//temp = c:\windows\*.*</font>
<font color="#804040">198 </font>    <font color="#804040"><b>if</b></font>(h!=INVALID_HANDLE_VALUE){  <font color="#0000ff">//Check whether we got valid handle or not </font>
<font color="#804040">199 </font>        <font color="#804040"><b>do</b></font>{
<font color="#804040">200 </font>            <font color="#804040"><b>if</b></font>(IsDir(data)){
<font color="#804040">201 </font>                <font color="#804040"><b>if</b></font>(ValidDir(data)){<font color="#0000ff">//Checks whether the Dir is . or ..</font>
<font color="#804040">202 </font>                    sprintf(temp1,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#6a5acd">\\</font><font color="#ff00ff">&quot;</font>,path,data.cFileName);
<font color="#804040">203 </font>                    <font color="#804040"><b>if</b></font>(!_maxdepth)SearchByText(temp1);
<font color="#804040">204 </font>                    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(depth_count++&lt;=maxdepth){
<font color="#804040">205 </font>                            SearchByText(temp1);
<font color="#804040">206 </font>                            --depth_count;
<font color="#804040">207 </font>                    }
<font color="#804040">208 </font>                }
<font color="#804040">209 </font>            }
<font color="#804040">210 </font>            <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(ValidExtension(data.cFileName)){
<font color="#804040">211 </font>                    <font color="#804040"><b>if</b></font>((!_attr&amp;&amp;!(IsHidden(data))&amp;&amp;!(IsSystem(data)))||
<font color="#804040">212 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'A'</font>&amp;&amp;IsArchive(data))||
<font color="#804040">213 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'C'</font>&amp;&amp;IsCompressed(data))||
<font color="#804040">214 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'E'</font>&amp;&amp;IsEncrypted(data))||
<font color="#804040">215 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'H'</font>&amp;&amp;IsHidden(data))||
<font color="#804040">216 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'R'</font>&amp;&amp;IsReadOnly(data))||
<font color="#804040">217 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'S'</font>&amp;&amp;IsSystem(data))||
<font color="#804040">218 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'T'</font>&amp;&amp;IsTemporary(data))){
<font color="#804040">219 </font>                        sprintf(temp1,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,path,data.cFileName);
<font color="#804040">220 </font>                        <font color="#804040"><b>if</b></font>(FileContainsText(temp1))_tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,path,data.cFileName);
<font color="#804040">221 </font>                    }
<font color="#804040">222 </font>            }
<font color="#804040">223 </font>        }<font color="#804040"><b>while</b></font>(FindNextFile(h,&amp;data));
<font color="#804040">224 </font>        FindClose(h);
<font color="#804040">225 </font>    }
<font color="#804040">226 </font>}
<font color="#804040">227 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">228 </font>BOOL FileContainsText(LPCTSTR file_path)
<font color="#804040">229 </font>{
<font color="#804040">230 </font>    <font color="#2e8b57"><b>static</b></font> TCHAR buf[<font color="#ff00ff">1025</font>];
<font color="#804040">231 </font>    <font color="#2e8b57"><b>static</b></font> HANDLE h;
<font color="#804040">232 </font>    <font color="#2e8b57"><b>static</b></font> <font color="#2e8b57"><b>int</b></font> read=<font color="#ff00ff">0</font>;
<font color="#804040">233 </font>    h = CreateFile(file_path,
<font color="#804040">234 </font>            GENERIC_READ,
<font color="#804040">235 </font>            FILE_SHARE_READ,
<font color="#804040">236 </font>            <font color="#ff00ff">NULL</font>,
<font color="#804040">237 </font>            OPEN_EXISTING,
<font color="#804040">238 </font>            FILE_ATTRIBUTE_READONLY,
<font color="#804040">239 </font>            <font color="#ff00ff">NULL</font>);
<font color="#804040">240 </font>    <font color="#804040"><b>if</b></font>(h!=INVALID_HANDLE_VALUE){
<font color="#804040">241 </font>        <font color="#804040"><b>while</b></font>(ReadFile(h,buf,<font color="#ff00ff">1024</font>,&amp;read,<font color="#ff00ff">NULL</font>)&amp;&amp;read&gt;<font color="#ff00ff">0</font>){
<font color="#804040">242 </font>            buf[read]=<font color="#6a5acd">'\0'</font>;
<font color="#804040">243 </font>            <font color="#804040"><b>if</b></font>(Contains(buf,text)){
<font color="#804040">244 </font>                CloseHandle(h)  ;
<font color="#804040">245 </font>                <font color="#804040"><b>return</b></font> TRUE;
<font color="#804040">246 </font>            }
<font color="#804040">247 </font>        }
<font color="#804040">248 </font>        CloseHandle(h);
<font color="#804040">249 </font>    }
<font color="#804040">250 </font>    <font color="#804040"><b>return</b></font> FALSE;
<font color="#804040">251 </font>}
<font color="#804040">252 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">253 </font>BOOL ValidExtension(LPCTSTR name)
<font color="#804040">254 </font>{
<font color="#804040">255 </font>    <font color="#804040"><b>return</b></font> _ext?EndsWith(name,ext):
<font color="#804040">256 </font>           (EndsWith(name,<font color="#ff00ff">&quot;.txt&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.cpp&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.log&quot;</font>)||
<font color="#804040">257 </font>           EndsWith(name,<font color="#ff00ff">&quot;.c&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.h&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.x&quot;</font>)||
<font color="#804040">258 </font>           EndsWith(name,<font color="#ff00ff">&quot;.rtf&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.xml&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.java&quot;</font>)||
<font color="#804040">259 </font>           EndsWith(name,<font color="#ff00ff">&quot;.cc&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.cs&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.js&quot;</font>)||
<font color="#804040">260 </font>           EndsWith(name,<font color="#ff00ff">&quot;.pl&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.rc&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.vb&quot;</font>)||
<font color="#804040">261 </font>           EndsWith(name,<font color="#ff00ff">&quot;.asm&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.asp&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.bat&quot;</font>)||
<font color="#804040">262 </font>           EndsWith(name,<font color="#ff00ff">&quot;.cmd&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.ini&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.css&quot;</font>)||
<font color="#804040">263 </font>           EndsWith(name,<font color="#ff00ff">&quot;.reg&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.css&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.def&quot;</font>)||
<font color="#804040">264 </font>           EndsWith(name,<font color="#ff00ff">&quot;.html&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.htm&quot;</font>)||EndsWith(name,<font color="#ff00ff">&quot;.inf&quot;</font>)||
<font color="#804040">265 </font>           EndsWith(name,<font color="#ff00ff">&quot;.py&quot;</font>));
<font color="#804040">266 </font>}
<font color="#804040">267 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">268 </font><font color="#2e8b57"><b>void</b></font> SearchByTime(LPTSTR path)
<font color="#804040">269 </font>{
<font color="#804040">270 </font>    HANDLE h;
<font color="#804040">271 </font>    TCHAR temp1[MAX_PATH];
<font color="#804040">272 </font>    sprintf(temp,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,path,<font color="#ff00ff">&quot;*.*&quot;</font>);<font color="#0000ff">//path = c:\windows name = *.*</font>
<font color="#804040">273 </font>    h = FindFirstFile(temp,&amp;data);<font color="#0000ff">//temp = c:\windows\*.*</font>
<font color="#804040">274 </font>    <font color="#804040"><b>if</b></font>(h!=INVALID_HANDLE_VALUE){  <font color="#0000ff">//Check whether we got valid handle or not </font>
<font color="#804040">275 </font>        <font color="#804040"><b>do</b></font>{
<font color="#804040">276 </font>            <font color="#804040"><b>if</b></font>(IsDir(data)){
<font color="#804040">277 </font>                <font color="#804040"><b>if</b></font>(ValidDir(data)){
<font color="#804040">278 </font>                    sprintf(temp1,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#6a5acd">\\</font><font color="#ff00ff">&quot;</font>,path,data.cFileName);
<font color="#804040">279 </font>                    <font color="#804040"><b>if</b></font>(!_maxdepth)SearchByTime(temp1);
<font color="#804040">280 </font>                    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(depth_count++&lt;=maxdepth){
<font color="#804040">281 </font>                        SearchByTime(temp1);
<font color="#804040">282 </font>                        --depth_count;
<font color="#804040">283 </font>                    }
<font color="#804040">284 </font>                }
<font color="#804040">285 </font>            }
<font color="#804040">286 </font>            <font color="#804040"><b>else</b></font> {
<font color="#804040">287 </font>                <font color="#0000ff">//printf(&quot;\n%s%s %d&quot;,path,data.cFileName,GetLastError());</font>
<font color="#804040">288 </font>                <font color="#804040"><b>if</b></font>((!_attr&amp;&amp;!(IsHidden(data))&amp;&amp;!(IsSystem(data)))||
<font color="#804040">289 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'A'</font>&amp;&amp;IsArchive(data))||
<font color="#804040">290 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'C'</font>&amp;&amp;IsCompressed(data))||
<font color="#804040">291 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'E'</font>&amp;&amp;IsEncrypted(data))||
<font color="#804040">292 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'H'</font>&amp;&amp;IsHidden(data))||
<font color="#804040">293 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'R'</font>&amp;&amp;IsReadOnly(data))||
<font color="#804040">294 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'S'</font>&amp;&amp;IsSystem(data))||
<font color="#804040">295 </font>                        (attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'T'</font>&amp;&amp;IsTemporary(data))){
<font color="#804040">296 </font>                    <font color="#804040"><b>if</b></font>(_at)FileTimeToSystemTime(&amp;data.ftLastAccessTime,&amp;St);
<font color="#804040">297 </font>                    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(_mt)FileTimeToSystemTime(&amp;data.ftLastWriteTime,&amp;St);
<font color="#804040">298 </font>                    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(_ct)FileTimeToSystemTime(&amp;data.ftCreationTime,&amp;St);
<font color="#804040">299 </font>                    <font color="#804040"><b>if</b></font>((lt&amp;&amp;IsDateBefore())||(gt&amp;&amp;IsDateAfter())||(eq&amp;&amp;IsDateEqual()))
<font color="#804040">300 </font>                _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#6a5acd">%s%s</font><font color="#6a5acd">\t</font><font color="#6a5acd">%d</font><font color="#ff00ff">/</font><font color="#6a5acd">%d</font><font color="#ff00ff">/</font><font color="#6a5acd">%d</font><font color="#ff00ff">&quot;</font>,path,data.cFileName,St.wMonth,St.wDay,St.wYear);
<font color="#804040">301 </font>                }
<font color="#804040">302 </font>            }
<font color="#804040">303 </font>        }<font color="#804040"><b>while</b></font>(FindNextFile(h,&amp;data));
<font color="#804040">304 </font>        FindClose(h);
<font color="#804040">305 </font>    }
<font color="#804040">306 </font>}
<font color="#804040">307 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">308 </font>_tmain(<font color="#2e8b57"><b>int</b></font> argc,LPTSTR *argv)
<font color="#804040">309 </font>{
<font color="#804040">310 </font>    <font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>,n;
<font color="#804040">311 </font>    <font color="#2e8b57"><b>static</b></font> TCHAR path[MAX_PATH];
<font color="#804040">312 </font>    <font color="#804040"><b>if</b></font>(argc&lt;<font color="#ff00ff">5</font>)<font color="#804040"><b>return</b></font> Help();
<font color="#804040">313 </font>    <font color="#0000ff">//Parse Command Line Arguments </font>
<font color="#804040">314 </font>    <font color="#804040"><b>for</b></font>(i=<font color="#ff00ff">1</font>;i&lt; argc;i++){
<font color="#804040">315 </font>        <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-path&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">316 </font>            _path=TRUE;
<font color="#804040">317 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">318 </font>            lstrcpy(path,argv[i]);
<font color="#804040">319 </font>            <font color="#804040"><b>if</b></font>(!EndsWith(path,<font color="#ff00ff">&quot;</font><font color="#6a5acd">\\</font><font color="#ff00ff">&quot;</font>))lstrcat(path,<font color="#ff00ff">&quot;</font><font color="#6a5acd">\\</font><font color="#ff00ff">&quot;</font>);
<font color="#804040">320 </font>            <font color="#804040"><b>if</b></font>(!PathExist(path)){
<font color="#804040">321 </font>                _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#6a5acd">%s</font><font color="#ff00ff"> path does not exists &quot;</font>,path);
<font color="#804040">322 </font>                <font color="#804040"><b>return</b></font> ;
<font color="#804040">323 </font>            }
<font color="#804040">324 </font>        }
<font color="#804040">325 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-name&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">326 </font>            _name=TRUE;
<font color="#804040">327 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">328 </font>            lstrcpy(name,argv[i]);
<font color="#804040">329 </font>        }
<font color="#804040">330 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-size&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">331 </font>            _size=TRUE;
<font color="#804040">332 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">333 </font>            lt = argv[i][<font color="#ff00ff">0</font>]==<font color="#ff00ff">'-'</font>;
<font color="#804040">334 </font>            gt = argv[i][<font color="#ff00ff">0</font>]==<font color="#ff00ff">'+'</font>;
<font color="#804040">335 </font>            eq = argv[i][<font color="#ff00ff">0</font>]==<font color="#ff00ff">'='</font>;
<font color="#804040">336 </font>            n = lstrlen(argv[i]);
<font color="#804040">337 </font>            size = argv[i][n-<font color="#ff00ff">1</font>]==<font color="#ff00ff">'K'</font>||argv[i][n-<font color="#ff00ff">1</font>]==<font color="#ff00ff">'k'</font>?<font color="#ff00ff">1024</font>:
<font color="#804040">338 </font>                   argv[i][n-<font color="#ff00ff">1</font>]==<font color="#ff00ff">'M'</font>||argv[i][n-<font color="#ff00ff">1</font>]==<font color="#ff00ff">'m'</font>?<font color="#ff00ff">1024</font>*<font color="#ff00ff">1024</font>:
<font color="#804040">339 </font>                   <font color="#ff00ff">1</font>;
<font color="#804040">340 </font>            size*=atoi(SubString(argv[i],<font color="#ff00ff">1</font>,n-<font color="#ff00ff">2</font>));
<font color="#804040">341 </font>            <font color="#0000ff">//if given size is not a number then atoi returns zero so size</font>
<font color="#804040">342 </font>            <font color="#0000ff">//become zero and we should terminate the program</font>
<font color="#804040">343 </font>            <font color="#804040"><b>if</b></font>(size==<font color="#ff00ff">0</font>){
<font color="#804040">344 </font>            _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Given Size(</font><font color="#6a5acd">%s</font><font color="#ff00ff">) is not in correct format.. Check find /?&quot;</font>,argv[i]);
<font color="#804040">345 </font>            <font color="#804040"><b>return</b></font>;
<font color="#804040">346 </font>            }
<font color="#804040">347 </font>        }
<font color="#804040">348 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-text&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">349 </font>            _text=TRUE;
<font color="#804040">350 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">351 </font>            lstrcpy(text,argv[i]);
<font color="#804040">352 </font>        }
<font color="#804040">353 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-ext&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">354 </font>            _ext=TRUE;
<font color="#804040">355 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">356 </font>            sprintf(ext,<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s%s</font><font color="#ff00ff">&quot;</font>,argv[i][<font color="#ff00ff">0</font>]==<font color="#ff00ff">'.'</font>?<font color="#ff00ff">&quot;&quot;</font>:<font color="#ff00ff">&quot;.&quot;</font>,argv[i]);
<font color="#804040">357 </font>        }
<font color="#804040">358 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-atime&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">359 </font>            _at=TRUE;
<font color="#804040">360 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">361 </font>            SetLtGtEq(argv[i]);
<font color="#804040">362 </font>            <font color="#0000ff">//Check whether we got date in right format</font>
<font color="#804040">363 </font>            <font color="#804040"><b>if</b></font>((lt==<font color="#ff00ff">0</font>||gt==<font color="#ff00ff">0</font>||eq==<font color="#ff00ff">0</font>)||(mm==<font color="#ff00ff">0</font>||dd==<font color="#ff00ff">0</font>||yy==<font color="#ff00ff">0</font>)){
<font color="#804040">364 </font>            _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Given Date(</font><font color="#6a5acd">%s</font><font color="#ff00ff">) is not in correct format.. Check find /?&quot;</font>,argv[i]);
<font color="#804040">365 </font>                <font color="#804040"><b>return</b></font>;
<font color="#804040">366 </font>            }
<font color="#804040">367 </font>        }
<font color="#804040">368 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-mtime&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">369 </font>            _mt=TRUE;
<font color="#804040">370 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">371 </font>            SetLtGtEq(argv[i]);
<font color="#804040">372 </font>            <font color="#0000ff">//Check whether we got date in right format</font>
<font color="#804040">373 </font>            <font color="#804040"><b>if</b></font>((lt==<font color="#ff00ff">0</font>||gt==<font color="#ff00ff">0</font>||eq==<font color="#ff00ff">0</font>)||(mm==<font color="#ff00ff">0</font>||dd==<font color="#ff00ff">0</font>||yy==<font color="#ff00ff">0</font>)){
<font color="#804040">374 </font>            _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Given Date(</font><font color="#6a5acd">%s</font><font color="#ff00ff">) is not in correct format.. Check find /?&quot;</font>,argv[i]);
<font color="#804040">375 </font>                <font color="#804040"><b>return</b></font>;
<font color="#804040">376 </font>            }
<font color="#804040">377 </font>        }
<font color="#804040">378 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-ctime&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">379 </font>            _ct=TRUE;
<font color="#804040">380 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">381 </font>            SetLtGtEq(argv[i]);
<font color="#804040">382 </font>            <font color="#0000ff">//Check whether we got date in right format</font>
<font color="#804040">383 </font>            <font color="#804040"><b>if</b></font>((lt==<font color="#ff00ff">0</font>||gt==<font color="#ff00ff">0</font>||eq==<font color="#ff00ff">0</font>)||(mm==<font color="#ff00ff">0</font>||dd==<font color="#ff00ff">0</font>||yy==<font color="#ff00ff">0</font>)){
<font color="#804040">384 </font>            _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Given Date(</font><font color="#6a5acd">%s</font><font color="#ff00ff">) is not in correct format.. Check find /?&quot;</font>,argv[i]);
<font color="#804040">385 </font>                <font color="#804040"><b>return</b></font>;
<font color="#804040">386 </font>            }
<font color="#804040">387 </font>        }
<font color="#804040">388 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-maxdepth&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">389 </font>            _maxdepth=TRUE;
<font color="#804040">390 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);<font color="#0000ff">//If last arg is option what to do *(~_~)*  ....!!!</font>
<font color="#804040">391 </font>            maxdepth=atoi(argv[i]);<font color="#0000ff">//if atoi fails it returns 0</font>
<font color="#804040">392 </font>            _maxdepth=maxdepth; <font color="#0000ff">//Incase maxdepth is 0 go for normal complete</font>
<font color="#804040">393 </font>                                <font color="#0000ff">//search so make _maxdepth false;</font>
<font color="#804040">394 </font>                                <font color="#0000ff">//if(maxdepth==0)_maxdepth=0;</font>
<font color="#804040">395 </font>                                <font color="#0000ff">//so _maxdepth=maxdepth;        </font>
<font color="#804040">396 </font>        }
<font color="#804040">397 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;-attr&quot;</font>))==<font color="#ff00ff">0</font>){
<font color="#804040">398 </font>            _attr=TRUE;
<font color="#804040">399 </font>            i+=(i&lt;argc-<font color="#ff00ff">1</font>);
<font color="#804040">400 </font>            lstrcpy(attr,argv[i]);
<font color="#804040">401 </font>            <font color="#804040"><b>if</b></font>(attr[<font color="#ff00ff">0</font>]&gt;=<font color="#ff00ff">'a'</font>&amp;&amp;attr[<font color="#ff00ff">0</font>]&lt;=<font color="#ff00ff">'z'</font>)attr[<font color="#ff00ff">0</font>]-=<font color="#ff00ff">32</font>;
<font color="#804040">402 </font>            <font color="#804040"><b>if</b></font>(!(attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'A'</font>||attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'C'</font>||attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'E'</font>||attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'H'</font>||attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'R'</font>||
<font color="#804040">403 </font>                attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'S'</font>||attr[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'T'</font>)){
<font color="#804040">404 </font>            _tprintf(<font color="#ff00ff">&quot;</font><font color="#6a5acd">\n</font><font color="#ff00ff">Given Attribute(</font><font color="#6a5acd">%s</font><font color="#ff00ff">) is not correct . Check find /?&quot;</font>,argv[i]);
<font color="#804040">405 </font>                <font color="#804040"><b>return</b></font>;
<font color="#804040">406 </font>            }
<font color="#804040">407 </font>        }
<font color="#804040">408 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(lstrcmpi(argv[i],_T(<font color="#ff00ff">&quot;/?&quot;</font>))==<font color="#ff00ff">0</font>)<font color="#804040"><b>return</b></font> Help();
<font color="#804040">409 </font>        <font color="#804040"><b>else</b></font> <font color="#804040"><b>return</b></font> Help();
<font color="#804040">410 </font>    }
<font color="#804040">411 </font>
<font color="#804040">412 </font>    <font color="#0000ff">//     _tprintf(&quot;\npath = %s file=%s size=%d text=%s&quot;,path,name,size,text);</font>
<font color="#804040">413 </font>    <font color="#0000ff">//     _tprintf(&quot;\npath = %d file=%d size=%d&quot;,lt,eq,gt);</font>
<font color="#804040">414 </font>    <font color="#0000ff">//     _tprintf(&quot;\npath = %d file=%d size=%d&quot;,_at,_ct,_mt);</font>
<font color="#804040">415 </font>    <font color="#0000ff">//     _tprintf(&quot;\npath = %d file=%d size=%d&quot;,mm,dd,yy);</font>
<font color="#804040">416 </font>    <font color="#804040"><b>if</b></font>(_name)SearchByName(path);
<font color="#804040">417 </font>    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(_size)SearchBySize(path);
<font color="#804040">418 </font>    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(_text)SearchByText(path);
<font color="#804040">419 </font>    <font color="#804040"><b>else</b></font> <font color="#804040"><b>if</b></font>(_at||_ct||_mt)SearchByTime(path);
<font color="#804040">420 </font>    <font color="#804040"><b>else</b></font> <font color="#804040"><b>return</b></font> Help();
<font color="#804040">421 </font>
<font color="#804040">422 </font>}
<font color="#804040">423 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">424 </font><font color="#2e8b57"><b>void</b></font>  SetLtGtEq(<font color="#2e8b57"><b>char</b></font> * p)
<font color="#804040">425 </font>{
<font color="#804040">426 </font>    <font color="#0000ff">//Set lt,gt,eq accordingly by examing p[0], which indicates first char of </font>
<font color="#804040">427 </font>    <font color="#0000ff">//Entered Date </font>
<font color="#804040">428 </font>    lt = p[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'-'</font>;
<font color="#804040">429 </font>    gt = p[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'+'</font>;
<font color="#804040">430 </font>    eq = p[<font color="#ff00ff">0</font>]==<font color="#ff00ff">'='</font>;
<font color="#804040">431 </font>    <font color="#0000ff">//Split the Date in to substrings when ever '/' encountered</font>
<font color="#804040">432 </font>    Split(p,<font color="#ff00ff">&quot;/&quot;</font>);  <font color="#0000ff">//Splited substrings are stored globally in char x[3][6] array   </font>
<font color="#804040">433 </font>    <font color="#0000ff">//Convert the Individual substrings in to integers</font>
<font color="#804040">434 </font>    mm = atoi(&amp;x[<font color="#ff00ff">0</font>][<font color="#ff00ff">1</font>]); <font color="#0000ff">//eliminate -,+,= character from date</font>
<font color="#804040">435 </font>    dd = atoi(x[<font color="#ff00ff">1</font>]);
<font color="#804040">436 </font>    yy = atoi(x[<font color="#ff00ff">2</font>]);
<font color="#804040">437 </font>
<font color="#804040">438 </font><font color="#0000ff">//  printf(&quot;\n%d  %d  %d  %d  %d  %d  &quot;,lt,gt,eq,mm,dd,yy);</font>
<font color="#804040">439 </font>}
<font color="#804040">440 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">441 </font>
<font color="#804040">442 </font><font color="#2e8b57"><b>void</b></font>  Split(LPCTSTR s,LPCTSTR pat)
<font color="#804040">443 </font>{
<font color="#804040">444 </font>    <font color="#2e8b57"><b>int</b></font> t=<font color="#ff00ff">0</font>,i=<font color="#ff00ff">0</font>;
<font color="#804040">445 </font>    <font color="#0000ff">//extracts +12 part of +12/25/2007</font>
<font color="#804040">446 </font>    t = IndexOf(s,pat,<font color="#ff00ff">0</font>);
<font color="#804040">447 </font>    sprintf(x[<font color="#ff00ff">0</font>],<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s</font><font color="#ff00ff">&quot;</font>,SubString(s,<font color="#ff00ff">0</font>,t));
<font color="#804040">448 </font>
<font color="#804040">449 </font>    <font color="#0000ff">//extracts 25 part of +12/25/2007</font>
<font color="#804040">450 </font>    i=t+<font color="#ff00ff">1</font>;
<font color="#804040">451 </font>    t = IndexOf(s,pat,i);
<font color="#804040">452 </font>    sprintf(x[<font color="#ff00ff">1</font>],<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s</font><font color="#ff00ff">&quot;</font>,SubString(s,i,t-i));
<font color="#804040">453 </font>
<font color="#804040">454 </font>    <font color="#0000ff">//extracts 2007 part of +12/25/2007</font>
<font color="#804040">455 </font>    i=t+<font color="#ff00ff">1</font>;
<font color="#804040">456 </font>    t=lstrlen(&amp;s[i]);
<font color="#804040">457 </font>    sprintf(x[<font color="#ff00ff">2</font>],<font color="#ff00ff">&quot;</font><font color="#6a5acd">%s</font><font color="#ff00ff">&quot;</font>,SubString(s,i,t));
<font color="#804040">458 </font>}
<font color="#804040">459 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">460 </font><font color="#2e8b57"><b>int</b></font> IndexOf(LPCTSTR str,LPCTSTR pat,<font color="#2e8b57"><b>int</b></font> start)
<font color="#804040">461 </font>{
<font color="#804040">462 </font>    <font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>,j=<font color="#ff00ff">0</font>;
<font color="#804040">463 </font>    <font color="#804040"><b>for</b></font>(i=start;str[i]!=<font color="#6a5acd">'\0'</font>;i++)
<font color="#804040">464 </font>    {
<font color="#804040">465 </font>        <font color="#804040"><b>for</b></font>(j=<font color="#ff00ff">0</font>;pat[j]!=<font color="#6a5acd">'\0'</font>;j++)
<font color="#804040">466 </font>            <font color="#804040"><b>if</b></font>(pat[j]!=str[i+j])<font color="#804040"><b>break</b></font>;
<font color="#804040">467 </font>        <font color="#804040"><b>if</b></font>(pat[j]==<font color="#6a5acd">'\0'</font>)<font color="#804040"><b>return</b></font> i;
<font color="#804040">468 </font>    }
<font color="#804040">469 </font>    <font color="#804040"><b>return</b></font> -<font color="#ff00ff">1</font>;
<font color="#804040">470 </font>}
<font color="#804040">471 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">472 </font>BOOL Contains(LPCTSTR s,LPCTSTR pat)
<font color="#804040">473 </font>{
<font color="#804040">474 </font>    <font color="#804040"><b>return</b></font> IndexOf(s,pat,<font color="#ff00ff">0</font>)&gt;-<font color="#ff00ff">1</font>;
<font color="#804040">475 </font>}
<font color="#804040">476 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">477 </font>LPTSTR SubString(LPCTSTR s,<font color="#2e8b57"><b>int</b></font> st,<font color="#2e8b57"><b>int</b></font> len)
<font color="#804040">478 </font>{
<font color="#804040">479 </font>    <font color="#2e8b57"><b>static</b></font> TCHAR buf[<font color="#ff00ff">1024</font>];
<font color="#804040">480 </font>    <font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>;
<font color="#804040">481 </font>    <font color="#804040"><b>while</b></font>(i&lt;len)
<font color="#804040">482 </font>    {
<font color="#804040">483 </font>        buf[i]=s[i+st];
<font color="#804040">484 </font>        i++;
<font color="#804040">485 </font>    }
<font color="#804040">486 </font>    buf[i]=<font color="#6a5acd">'\0'</font>;
<font color="#804040">487 </font>    <font color="#804040"><b>return</b></font> buf;
<font color="#804040">488 </font>}
<font color="#804040">489 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">490 </font>BOOL EndsWith(LPCTSTR s1,LPCTSTR pat)
<font color="#804040">491 </font>{
<font color="#804040">492 </font>    <font color="#2e8b57"><b>int</b></font> i=<font color="#ff00ff">0</font>;
<font color="#804040">493 </font>    <font color="#2e8b57"><b>int</b></font> n=lstrlen(pat);
<font color="#804040">494 </font>    <font color="#2e8b57"><b>int</b></font> sn = lstrlen(s1);
<font color="#804040">495 </font>    <font color="#804040"><b>for</b></font>(i=n-<font color="#ff00ff">1</font>;i&gt;=<font color="#ff00ff">0</font>;i--)
<font color="#804040">496 </font>        <font color="#804040"><b>if</b></font>(pat[i]!=s1[--sn])<font color="#804040"><b>return</b></font> FALSE;
<font color="#804040">497 </font>    <font color="#804040"><b>return</b></font> TRUE;
<font color="#804040">498 </font>}
<font color="#804040">499 </font><font color="#0000ff">//=====================================================================================</font>
<font color="#804040">500 </font>
<font color="#804040">501 </font>
</pre>
</body>
</html>
